{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/slide-toggle\";\nfunction ProjectDetailsComponent_mat_card_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 7);\n    i0.ɵɵelement(1, \"img\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const image_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", image_r1, i0.ɵɵsanitizeUrl);\n  }\n}\nconst _c0 = function () {\n  return [\"\"];\n};\nlet ProjectDetailsComponent = /*#__PURE__*/(() => {\n  class ProjectDetailsComponent {\n    constructor(route, cdr) {\n      this.route = route;\n      this.cdr = cdr;\n      this.projectId = 0;\n      this.projectImages = [];\n    }\n    ngOnInit() {\n      this.projectId = Number(this.route.snapshot.paramMap.get('id'));\n      // Example images (replace with dynamic data)\n      this.projectImages = [];\n    }\n    selectFolder() {\n      if (!window.electronAPI) {\n        console.error('[angular] electronAPI is undefined');\n        return;\n      }\n      window.electronAPI.openFolderDialog().then(folderPath => {\n        if (!folderPath) return;\n        this.folderPath = folderPath;\n        // โหลดภาพที่มีอยู่ในโฟลเดอร์\n        window.electronAPI.readImagesInFolder(folderPath).then(files => {\n          const imageFiles = files.filter(filePath => this.isImageFile(filePath)).map(filePath => `file://${filePath}`);\n          this.projectImages = imageFiles;\n          this.cdr.detectChanges();\n        });\n        // เริ่มเฝ้าดูโฟลเดอร์\n        window.electronAPI.watchFolder(folderPath);\n        // รับ event เมื่อมีไฟล์ใหม่\n        window.electronAPI.onNewFileDetected(filePath => {\n          const imageSrc = `file://${filePath}`;\n          if (this.isImageFile(filePath) && !this.projectImages.includes(imageSrc)) {\n            this.projectImages.push(imageSrc);\n            this.cdr.detectChanges();\n          }\n        });\n      });\n    }\n    isImageFile(fileName) {\n      return /\\.(jpe?g|png|gif|bmp|webp)$/i.test(fileName);\n    }\n    static {\n      this.ɵfac = function ProjectDetailsComponent_Factory(t) {\n        return new (t || ProjectDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProjectDetailsComponent,\n        selectors: [[\"app-project-details\"]],\n        decls: 19,\n        vars: 5,\n        consts: [[1, \"project-details\"], [\"mat-button\", \"\", 2, \"color\", \"red\", 3, \"routerLink\"], [\"mat-button\", \"\", 2, \"color\", \"white\", 3, \"click\"], [\"color\", \"primary\"], [2, \"color\", \"white\"], [1, \"gallery-grid\"], [\"class\", \"gallery-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"gallery-item\"], [\"mat-card-image\", \"\", \"alt\", \"Project Image\", 3, \"src\"]],\n        template: function ProjectDetailsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\")(2, \"button\", 1);\n            i0.ɵɵtext(3, \"Back to Project\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"div\")(5, \"span\");\n            i0.ɵɵtext(6);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\")(8, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function ProjectDetailsComponent_Template_button_click_8_listener() {\n              return ctx.selectFolder();\n            });\n            i0.ɵɵtext(9, \"Select Local Folder\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"span\");\n            i0.ɵɵtext(11);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\")(13, \"p\")(14, \"mat-slide-toggle\", 3)(15, \"span\", 4);\n            i0.ɵɵtext(16, \"Auto Upload\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(17, \"div\", 5);\n            i0.ɵɵtemplate(18, ProjectDetailsComponent_mat_card_18_Template, 2, 1, \"mat-card\", 6);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c0));\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate1(\"Project Name: \", ctx.projectId, \"\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\" : \", ctx.folderPath, \"\");\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.projectImages);\n          }\n        },\n        dependencies: [i2.NgForOf, i1.RouterLink, i3.MatCard, i3.MatCardImage, i4.MatButton, i5.MatSlideToggle],\n        styles: [\".project-details[_ngcontent-%COMP%]{padding:20px;background:#1c1c1c;color:#fff}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:20px}.gallery-item[_ngcontent-%COMP%]{background:#282828;border-radius:10px;overflow:hidden;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}\"]\n      });\n    }\n  }\n  return ProjectDetailsComponent;\n})();\nexport { ProjectDetailsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}